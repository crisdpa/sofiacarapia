<!DOCTYPE html>
<!-- Con mucho cariño para mi sobrina Sofi -->
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta
      name="description"
      content="Esta es una invitación para que me acompañes a celebrar mis 15 años."
    />
    <meta
      property="og:image"
      content="https://sofiacarapia.com/img/opengraph-cover.png"
    />
    <meta name="robots" content="none" />
    <title>Sofia Carapia - Mis XV años</title>
    <style>
      @font-face {
        font-family: "Dancing Script";
        src: local("☺"),
          url("fonts/DancingScript-VariableFont_wght.ttf") format("truetype");
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: "Raleway";
        src: local("☺"),
          url("fonts/Raleway-VariableFont_wght.ttf") format("truetype");
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }
    </style>
    <link rel="stylesheet" href="main.css" />
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YDHQTF2KVN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YDHQTF2KVN');
</script>
  </head>
  <body>
    <section class="hero">
      <div class="hero__content">
        <div class="hero__logo">
          <h1 class="hero__title">Sofía<br />Carapia<br>Peralta</h1>
          <h2 class="hero__subtitle">Mis XV años</h2>
        </div>
        <div class="hero__details">
          <p class="hero__guests">
            <strong class="hero__person"></strong> esta es una invitación para
            que me acompañes a celebrar mis 15 años.
          </p>
          <p>La fecha es el próximo:</p>
          <p class="hero__date">15 de septiembre</p>
          <p class="hero__time">16:15 hrs</p>
        </div>
      </div>
    </section>
    <main class="main">
      <section class="section">
        <h1 class="section__title">Ubicación</h1>
        <div class="location__content">
          <article class="location__place">
            <h2 class="section__subtitle">Misa</h2>
            <p>
              Lienzo Charro Aragón
              <span class="location-time">15:00 hrs</span>
            </p>
            <a
              href="https://www.google.com/maps/place/Lienzo+Charro+de+Aragon/@19.4618951,-99.0653777,17z/data=!3m1!4b1!4m6!3m5!1s0x85d1fb7f4faaddeb:0xe3e6f4503df92639!8m2!3d19.4618901!4d-99.0628028!16s%2Fg%2F11gt9xhplf?entry=tts"
              target="_blank"
              rel="noopener"
              >ver mapa</a
            >
          </article>

          <article class="location__place">
            <h2 class="section__subtitle">Recepción</h2>
            <p>
              Lienzo Charro Aragón,<br />
              Salón Mirandilla
              <span class="location-time">16:15 hrs</span>
            </p>
            <a
              href="https://www.google.com/maps/place/Lienzo+Charro+de+Aragon/@19.4618951,-99.0653777,17z/data=!3m1!4b1!4m6!3m5!1s0x85d1fb7f4faaddeb:0xe3e6f4503df92639!8m2!3d19.4618901!4d-99.0628028!16s%2Fg%2F11gt9xhplf?entry=tts"
              target="_blank"
              rel="noopener"
              >ver mapa</a
            >
          </article>
        </div>
      </section>
    </main>

    <section class="section section-gifts">
      <h1 class="section__title">Mesa de Regalos</h1>
      <p>
        No hay mejor regalo que tener tu compañía,<br />
        pero si deseas darme un detalle, aquí hay algunas opciones:
      </p>
      <div class="gifts__content">
        <article class="gifts__option">
          <a
            href="https://mesaderegalos.liverpool.com.mx/milistaderegalos/51481604"
            target="_blank"
            >Liverpool</a
          >
        </article>
        <article class="gifts__option">
          <a
            href="https://www.amazon.com.mx/registries/gl/guest-view/2ZBQNCYRALU59"
            target="_blank"
            >Amazon</a
          >
        </article>
        <article class="gifts__option">
          <a
            href="https://www.google.com/search?q=lluvia+de+sobres+xv+a%C3%B1os+qu%C3%A9+significa"
            target="_blank"
            >Lluvia de sobres</a
          >
        </article>
      </div>
      <a
        class="audio-button"
        data-playing="false"
        role="switch"
        aria-checked="false"
      >
        <img
          src="./img/play.png"
          class="audio-button__play"
          alt="reproducir música"
        />
        <img
          src="./img/pause.png"
          class="audio-button__pause"
          alt="pausar música"
        />
      </a>
    </section>

    <section class="section section-dresscode">
      <h1 class="section__title">Código de vestimenta</h1>
      <img src="./img/dresscode.png" alt="Código de vestimenta" />
      <p class="section-dresscode__type">FORMAL</p>
    </section>

    <section class="assistance-confirmation">
      <p>Favor de confirmar tu asistencia por este medio:</p>
      <button class="assistance-confirmation__button" onclick="openConfirmationDialog()">
        Confirmar asistencia
      </button>
    </section>

    <dialog class="confirmation-dialog">
      <iframe
        src="https://docs.google.com/forms/d/e/1FAIpQLSeEGBjAonf7Or8oZ3MkTPfWAliC4IyWttbU1w2twIBPP4_LiA/viewform?embedded=true"
        width="100%"
        height="100%"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
        class="confirmation-dialog__form"
        >Cargando…</iframe
      >
      <img src="./img/close-icon.svg" alt="cerrar" class="confirmation-dialog__close" onclick="closeConfirmationDialog()" />
    </dialog>

    <footer class="footer">
      Desarrollado con cariño para Sofi por
      <a href="https://christopher.mx/" target="_blank" rel="noopener"
        >christopher.mx</a
      >
    </footer>
    <section class="overlay-intro">
      <div class="overlay-intro__content">
        <h1 class="overlay-intro__title">Invitación</h1>
        <h2 class="overlay-intro__subtitle">XV Sofía Carapia Peralta</h2>
        <a class="overlay-intro__link-primary" onclick="closeIntroOverlay()"
          >Ver con música ▶</a
        >
        <a
          class="overlay-intro__link-secundary"
          onclick="closeIntroOverlay(false)"
          >ver sin música</a
        >
      </div>
    </section>
    <audio src="brillas.mp3" loop></audio>

    <script>
      const heroPerson = document.querySelector(".hero__person");
      const urlParams = new URLSearchParams(document.location.search);
      const forPerson = urlParams.get("para");
      if (forPerson) {
        heroPerson.textContent = `${forPerson}:`;
      }

      const confirmationDialog = document.querySelector('.confirmation-dialog');

      const audioContext = new AudioContext();
      const audioElement = document.querySelector("audio");
      const track = audioContext.createMediaElementSource(audioElement);
      const audioButton = document.querySelector(".audio-button");

      const introOverlay = document.querySelector(".overlay-intro");

      const toggleSound = () => {
        if (audioContext.state === "suspended") {
          audioContext.resume();
        }

        if (audioButton.dataset.playing === "false") {
          audioElement.play();
          audioButton.dataset.playing = "true";
          audioButton.classList.toggle("audio-button--playing");
        } else if (audioButton.dataset.playing === "true") {
          audioElement.pause();
          audioButton.dataset.playing = "false";
          audioButton.classList.toggle("audio-button--playing");
        }
      };

      const closeIntroOverlay = (withSound = true) => {
        introOverlay.style.display = "none";

        if (withSound) {
          toggleSound();
        }
      };

      track.connect(audioContext.destination);
      audioButton.addEventListener("click", toggleSound, false);

      function closeConfirmationDialog() {
        confirmationDialog.close();
      }

      function openConfirmationDialog() {
        confirmationDialog.show();
      }
    </script>
  </body>
</html>
